K_data = [-1.7,16.3
-1.6264401336860614,15.704888531286128
-1.6357881911518697,15.907897261512844
-1.6383440916459784,15.60465735345152
-1.5987893249824274,15.086763303746718
-1.652188332191985,14.559954008006557
-1.7379893684827308,14.021564779955115
-1.817502619965849,13.47382023323388
-1.9033178965105242,12.92019588326712
-2.0241709801965886,12.358907417833805
-2.113447522571273,11.778656609956924
-2.1562855929119538,11.193820879638778
-1.9626310585685578,11.737419118962206
-1.9117351736437986,11.679748359282286
-1.9131360418173469,11.010702978140168
-1.9031521309154837,10.327733754893897
-1.875396358943226,9.725166980996855
-1.8551606468601318,9.089224963985568
-1.8203049120591832,8.464620346430934
-1.8125727488348211,7.8574761162406626
-1.8648851358741492,7.254584070915383
-1.9682478597424455,6.661795759811869
-1.9952032887617714,5.657795765338713
-2.053944982099726,4.984568332924196
-2.1440983727739797,4.3897547200144835
-2.19637061136806,3.8190313582437576
-2.2765336367052567,3.2493652850618995
-2.299429612892741,2.6524512896190937
-2.3101630880854684,2.0301154060137523
-1.7659973044777737,1.7783847099421044
-2.201566479887896,1.3678706085635275
-1.589642413551475,1.3821864071977163
0.46122797126539816,1.0178085283374587
1.2679569357032996,0.8348270204710981
1.9036120357690571,0.660911537399137
2.43133744374411,0.37275386654114007
2.807557963494742,-0.030143632498200734
2.3900105662098907,0.41157291052902534
2.943381904340578,0.15898581822859015
3.5433624262324406,0.26447244764679234
4.152829720847841,0.2282898078335669
4.7529511715521915,0.16325348970330378
5.202489528995865,0.9654479421856246
4.833863212189421,1.7062014785281971
4.784318987131562,2.3198547677575148
4.74358134502514,2.8284542358403457
4.729453865266088,3.4107892838510505
4.699318736032684,3.9840365442166834
4.638836568137959,4.5608772391074694
4.596400559223139,5.142740034679727
4.458109275657131,5.710375708675597
4.319775984839181,6.283426047659425];

W_data=[-1.7,16.3
-1.0,16.23502603516276
-1.727246193273745,17.0
-1.7843232870449357,17.0
-1.0,16.24551148843608
-1.5787506809024636,16.497041431944833
-2.08957953479987,16.53476977998703
-1.5752291195535717,16.510712507191116
-1.5695918663746184,16.499712225901657
-1.7733656482019875,15.453268703596022
-1.8239472592050177,13.72091013547554
-1.8442538758038263,13.745249304559056
-1.6792168541282972,13.289613880095594
-1.5708530774741694,14.231029538599026
-1.5150793080486078,10.025943964843337
-1.6778500386094477,8.050058641396582
-1.5790909952672916,9.594577796056129
-1.8450414775559296,6.717686168583537
-1.9023278374094852,6.14769676690758
-2.163144421311229,6.995163729073689
-1.8659635595606556,6.46794183027023
-1.8604647005642538,6.310842976090181
-1.908675103810142,5.1000000000000005
-1.767023070164465,4.583068624604306
-1.931783545379576,4.331783545379576
-1.5814241944421157,4.494652465850589
-1.9061568027242515,4.306156802724251
-2.7,2.838867833960453
-2.0371236601106464,0.0
-1.9536660376967085,1.492667924606583
-2.7,2.2143397314649778
0.7192073103537318,0.4807926896462681
2.452413909620886,0.7095172180758229
2.3446754136714234,0.7310649172657153
3.416285837303091,2.2160472337034136
3.4860638204149277,1.994889839834613
2.1078287935260955,2.2539143967630477
3.4924682416841364,2.232100075188932
4.63663378936446,1.9455445964548197
4.387524040114143,1.8625080133713812
5.999999999999999,3.350093510976146
6.000000000000001,4.492368966797191
6.0,1.2617472020028884
3.881685102286892,2.479569985556092
5.474536997011183,2.6273150149440885
6.0,0.4914905209084865
4.812397636410256,2.634965170625833
6.000000000000001,2.3717825590834254
5.647394666157268,2.8582539963657565
5.570473829324058,3.237022450086141
4.120873455984595,3.167739624213637
4.3931087913009295,4.264369597100309];

[m n] = size(K_data);
%真实路径
x = -2.2;
y = 17;
step = m;
real =[x,y];
step1 = 28;
step2 = 14;
step3 = step - step1 -step2;
for i = 1 : step1
    y = y - 0.6;
    real = [real;x,y];
end
for i = 1 : step2
    x = x + 0.6;
    real = [real;x,y];
end
for i = 1 : step3
    y = y + 0.6;
    real = [real;x,y];
end

%%
x1 = K_data(:,1);
y1 = K_data(:,2);
x2 = W_data(:,1);
y2 = W_data(:,2);

plot(x1,y1,'-*');
hold  on;
plot(x2,y2,'-o');
hold  on;
plot(real(:,1),real(:,2),'-^');
legend('融合算法','WIFI指纹定位','真实路径');
xlabel('X轴:m');ylabel('Y轴:m');%坐标轴表示对象标签

for i = 1 : step
    e1(i) = norm(K_data(i,:)-real(i,:));
    e2(i) = norm(W_data(i,:)-real(i,:));
end
mean1 = mean(e1)
mean2 = mean(e2)
var1 = var(e1)
var2 = var(e2)

figure;
plot(e1,'-*');
hold  on;
plot(e2,'-o');
legend('融合算法','WIFI指纹定位');
xlabel('步数');ylabel('误差:m');%坐标轴表示对象标签

%%概率分布和概率累计分布
[b1 x1]=hist(e1,100);
num1=numel(e1);
c1=cumsum(b1/num1);  

[b2 x2]=hist(e2,100);
num2=numel(e2);
c2=cumsum(b2/num2);  

%图形效果不好，点太少
% figure;
% plot(x1,b1/num1,'-*');   %概率密度
% hold on;
% plot(x2,b2/num2,'-o');   %概率密度
% legend('融合算法','WIFI指纹定位');

figure;
plot(x1,c1,'-*');   %累计分布
hold on;
plot(x2,c2,'-o');   %累计分布
legend('融合算法','WIFI指纹定位');
xlabel('误差:m');ylabel('概率');%坐标轴表示对象标签